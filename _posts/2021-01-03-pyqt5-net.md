---
layout: blogpost
title: "PyQt5 Network Manager"
date: 2021-01-03
tags: programming
description: "The correct way to use the network manager."
---
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

```Python
# Create the network manager
manager = QtNetwork.QNetworkAccessManager()
# Attach the weather interface update function
manager.finished.connect(wxupdate)

def get_weather():
    # Create the URL
    url = QUrl('https://api.openweathermap.org/data/2.5/onecall?' +
               'lat=' + lat + '&lon=' + lon + '&units=imperial' +
               '&exclude=minutely,alerts&appid=' + keys.owm_api)
    # Create the network request
    req = QNetworkRequest(url)
    # Get the request
    manager.get(req)
    
def wxupdate(reply):
    if(reply.error() != QNetworkReply.NoError):
        return
    tempstr = str(reply.readAll(), 'utf-8')
    tempdata = json.loads(tempstr)
```
